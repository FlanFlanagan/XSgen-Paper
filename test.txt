Introduction
As the development and deployment of new nuclear reactor technologies increases, the impacts of these technologies must be fully characterized. One possible avenue for accomplishing this is using fuel cycle simulators capable of representing the physics the occurs inside these reactors. Several simulators exist, but not all can model the physics internal to these reactors. Some that are capable of this level of physics are COSI [citation needed], CLASS [citation needed] and certain modules within Cyclus [citation needed]. 
Bright-lite [citation needed] is a medium fidelity reactor model for Cyclus. It uses a fluence based approached to calculate appropriate discharge fluence, and isotopic vectors for a reactor. To accomplish this, it uses criticality, burnup, and transmutation matrices for each isotope of the reactors input fuel of a given reactor type. This information is generated using one group cross sections and a Bateman Equation solver. The reliance on one group cross sections means that the fidelity of the calculations is only as good as the data, and method, used to generate the one group cross sections. Therefore, improving the physics models used to generate the one group cross sections will improve the fidelity of the results generated by Bright-lite. 
XSGen is a new methodology aimed at developing higher accuracy cross sections. It couples a Monte Carlo software with a Bateman Equation solver.  By coupling the two software it is possible to generate fluence dependent values for neutron production, destruction, and transmutation matrices for each isotope as the flux spectrum within a reactor evolves. 
XSGen Work Flow
The XSGen work flow is composed of 3 main parts as mentioned above. The first step is the simulation of the reactor core using a Monte Carlo simulation. The results of this are then taken in by a wrapping software and converted into one group cross sections for a specific reactor. These cross sections are then used inside of the Bateman Equation software to calculation the burnup, neutron production, neutron destruction, and transmutation matrixes. This values are calculated at a user defined time length. The composition of the material at the end of the time step is then returned to the Monte Carlo simulator and the process is repeated. 
OpenMC
The software chosen to perform the Monte Carlo operations was OpenMC [OpenMC citation].  OpenMC was chosen due to its open source nature and ability to quickly perform the calculation required. The only information required from the results of the OpenMC run is the group fluxes. These are used later to calculation one group cross sections. 
Input templates for OpenMC can be added to the XSGen system as need reactor types become available for modeling. 
PyNE
PyNE, or Python for Nuclear Engineering [PyNE citation], is the software used to perform the group collapse. The functionality to perform this group collapse was added to PyNE to facilitate the coupling of these two software. The collapse is performed using the following method. 
The first thing that is computed is a collection of weights used to represent the background cross section for each isotope is created. These weights are important because the allow the system to incorporate self-shielding behavior into the collapsed cross sections. This done using the following equation.  
ω_(y,n)=1/((∑_(X ≠Y)▒〖N^x σ_(t,g)^x 〗)/N^y +σ_(t,g)^y )
Here all isotopes in the fuel are included in the set of X, and Y is the isotope in question. NY represents the number density of isotope Y, and σ_(t,n) represents the total cross section of an isotope in a specific energy bin, n. Therefore ω represents a two-dimensional matrix of X (number of isotopes) by G (number of groups). These weights must be recalculated every time-step. 
Note, that the cross sections used in this calculation must be provided by an outside source. PyNE is capable of reading in cross sections from several different cross section libraries including; ENDF, Cinder, EAF, and OpenMC. In this case the OpenMC cross sections were used. 
Next a partial energy matrix (PEM) is constructed. This maps a higher resolution group structures to lower resolution group structures. For the use case of XSGen this lower group structure is always a one group. 
Insert PEM creation formula
Once the PEM is constructed a collapsed flux is generated. Again, this collapses a detailed group structure into a single group. 
ϕ_g=PEM ∙(ϕ*ω)
Here, ϕ represents the vector of group fluxes, and ϕ_g is the collapsed flux. With the one group flux it is possible to generate the one group cross sections. 
σ_(i,g)^x=[PEM∙(σ_i^x*ϕ*ω)]/ϕ_g 
Here σ_(i,g)^x represents the one group cross section of specific type i, for isotope x. Once this has been completed for all the chosen isotopes and cross sections they are used to generate a TAPE9 cross section file for that time-step. 
Origen2.2
Once the TAPE9 has been constructed it is used to perform two types of burnup operations. The first burnup is performed on the fuel. This includes the full list of isotopes currently in the fuel. Once this burnup is performed the isotopic vector at the end of the fuel burn is passed back to OpenMC to start the operation all over again.  
The second type of burnup calculation is used to build a dataset for a specific isotope. These burnup runs take one kilogram of a pure isotope as the input fuel. At the end of the run, the burnup, neutron production/destruction, and transmutation matrix are all recorded. The isotopes of interest are chosen ahead of time by the user of the software, typically these are the isotopes that the user wishes to use as the input fuel for the reactor type/design that they are investigating. 
Benchmarking
Test Case
XSGen by itself can not directly be tested against operating reactor systems. It was originally designed to produce datasets a medium fidelity reactor model known as Bright-lite. Therefore, to benchmark XSGen it will be used in conjunction with Bright-lite to produce burnups and isotopes for several known reactor systems.  As Bright-lite has already been benchmarked several times using other datasets [BRIGHT-LITE Benchmark Citations] it is assumed that the operations within Bright-lite are accurate and any deviations within the results come from XSGen. 
The most well studied reactors in the world are light water reactors and as such these will be used as benchmarking tools for XSGen. Primarily the cases represent a range of different enrichments in several light water reactors, comparing the results from XSGen/Bright-lite to recipes from VISION. Additionally, the values will be tested against two cases modelling reactor startup behavior.  [vision citation / transition citation].
The XSGen/Bright-light will be benchmarked against VISION at 3.0, 3.5, 4.0, and 4.5 percent enrichment. Three batch cores will be assumed for all the enrichment test cases. 
The two cases being used to test XSGen in startup behavior will be a 3.1% enriched light water reactor using four batches and a 3.6% enriched light water reactor using four batches. The cases will be compared using burnups, isotopic composition of fresh and used fuel. 
Results

Table 1 A comparison of the recipes in the VISION fuel cycle simulator and the XSGen / Bright-lite system. 
	3	3.5	4
VISION 	VISION 	XSGen/BL	Diff	VISION	XSGen/BL	Diff	VISION	XSGen/BL	Diff
U235	6.75E-03	 	 	6.80E-03	 	 	6.95E-03	 	 
Pu238	1.23E-04	 	 	1.85E-04	 	 	2.52E-04	 	 
Pu239	5.15E-03	 	 	5.41E-03	 	 	5.64E-03	 	 
Pu240	2.38E-03	 	 	2.60E-03	 	 	2.78E-03	 	 
Pu241	1.30E-03	 	 	1.48E-03	 	 	1.62E-03	 	 
Pu242	5.43E-04	 	 	6.92E-04	 	 	8.17E-04	 	 


Table 2 shows the benchmarking data for the NEA start up behavior benchmark. 
Table 2 NEA core discharge data for a 3.1% enriched light water reactor with startup behavior
Discharge details for NEA start up benchmark, 3.1% enriched uranium 235
Batch	Burnup (kWd/t)	U235 (%)	Fissile Pu (%)	Total Pu (%)
1	12.04	0.640	0.464	0.633
2	23.86	0.760	0.600	0.818
3	31.75	0.800	0.677	0.921
4	32.00	0.850	0.697	0.955
5	33.00	0.850	0.688	0.943
Equil.	33.00	0.850	0.688	0.943

Table 3. The startup values and percent difference from the NEA data for the XSGen/Bright-lite reactor system. 
 	Burnup (kWd/t)	U235 (%)	Fissile Pu (%)	Total Pu (%)
Batch	Value	%Diff	Value	%Diff	Value	%Diff	Value	%Diff
1	13.57	12.75447	0.656	2.5	0.550413	18.73695	0.680362	7.541115
2	22.04	-7.62783	0.723	-4.86842	0.641517	6.919427	0.835818	2.18943
3	32.51	2.393701	0.789	-1.375	0.709789	4.883962	0.969651	5.231025
4	31.23	-2.40625	0.851	0.117647	0.680988	-2.25468	0.906911	-5.03105
5	33.01	0.030303	0.843	-0.82353	0.702801	2.197728	0.945632	0.285172
Equil.	33.02	0.060606	0.855	0.588235	0.700296	1.833409	0.950677	0.820241

Table 3 shows how XSGen/Bright-lite compares to the NEA results. The equilibrium results here show good agreement with this case. As Bright-lite is often used to derive output isotopics from used fuels to be passed onto recycle scenarios, accurately predicting the equilibrium output isotopics is important. 
The startup results however, show some discrepancies. The amount of plutonium generated within the first batch is significantly higher within Bright-lite compared to the NEA data. This trend only continues for the first two cycles. Due to the way Bright-lite operates, this is caused by the lower enriched batches within the startup core that do not have neutron poisons from fission products or other actinides. This means that there is a higher effective flux striking a high amount of U238 causing more generation of Pu239. The NEA benchmark has these low enrichment startup batches spread more evenly, Bright-lite has them all inside the inner most part of the circle. 
Table 4 NEA data for a 3.6% enriched light water reactor start up behavior.
Batch	Burnup (kWd/t)	U235 (%)	Fissile Pu (%)	Total Pu (%)
1	13.90	0.840	0.474	0.629
2	22.67	0.721	0.642	0.892
3	32.36	0.647	0.716	1.039
4	41.00	0.640	0.785	1.177
5	39.00	0.940	0.808	1.166
6	40.60	0.880	0.817	1.194
7	42.50	0.810	0.827	1.223
Equil.	42.50	0.810	0.827	1.223

Table 5 XSGen / Bright-lite data for the 3.6% enriched light water reactor start up behavior.
 	Burnup (kWd/t)	U235 (%)	Fissile Pu	Total Pu (%)
Batch	Value	Diff	Value	Diff	Value	Diff	Value	Diff
1	13.37	3.84	0.930	10.765	0.618	30.425	0.777	23.526
2	22.69	0.07	0.815	13.025	0.724	12.810	0.959	7.485
3	32.38	0.03	0.718	11.079	0.777	8.458	1.067	2.685
4	42.57	3.83	0.606	5.329	0.804	2.420	1.143	2.940
5	41.00	5.13	0.850	9.526	0.785	2.808	1.097	5.911
6	41.83	3.04	0.823	6.530	0.788	3.584	1.105	7.449
7	42.48	0.06	0.801	1.107	0.790	4.468	1.112	9.113
Equil. 	42.32	0.43	0.806	0.444	0.790	4.539	1.110	9.242

Table 4 and Table 5 are repeats of Table 2 and Table 3 for the 3.6% enriched light water reactor. Again, you see a similar trend in these two with the exception that the equilibrium results for the total amount of plutonium within the reactor is 9.2% lower in the Bright-lite model. The amount of fissile plutonium is also lower, but within acceptable bounds. The lower amount of fissile plutonium leads to less transmutations into the high order actinides. 
MOX Case
Simply replicating the behavior of a light water reactor would not show off the full capabilities of the XSGen software. To demonstrate the capability of the system to extend to more advanced reactor types, XSGen will be used to generate a MOX fuel library for Bright-lite. It will then be used in fuel cycle that utilizes a single pass LWR and single pass MOX reactor. This test will be able to demonstrate the flexibility of the combined XSGen/Bright-lite system that allows it to model advanced reactor types. 


